<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
  <meta http-equiv="content-type"
        content="application/xhtml+xml; charset=utf-8"/>
  <script src="snap.svg-min.js"></script>
  <style type="text/css">
  .letter {
    font-family: Verdana;
    font-weight: bolder;
  }
  </style>
</head>
<body>
<script type="text/javascript">
var button_settings = {
  width: 26,
  height: 23,
  fill: "#F2F7F1",
  stroke: "#88aca0",
  strokeWidth: "1",
  transform: "t0.5 0.5",
  cursor: "hand"
};

var letter_settings = {
  left_offset : 13,
  top_offset : 26,
  'cursor': 'hand',
  'class':'letter',
  'fill': '#006600'
}

/**
 * Draws a standard rectangular key on the keyboard
 *
 * @s         {Snap}          Snap canvas to draw on
 * @character {string}        Button text
 * @x         {int}           Key distance from left
 * @y         {int}           Key distance from top
 */
var Key = function(s, character, x, y) {
  var _button;
  var _letter;
  var _key;

  _button = s.rect();
  _button.attr(button_settings);

  _letter = s.text(0, 0, character.lower);
  _letter.attr(letter_settings);

  // Reposition text in button
  var left = ((_button.node.clientWidth - _letter.node.clientWidth) / 2) + letter_settings.left_offset;
  var top = ((_button.node.clientHeight - _letter.node.clientHeight) / 2) + letter_settings.top_offset;
  _letter.transform("t" + left + "," + top);

  // Position the key
  this.key = s.g(_button, _letter);
  this.key.transform("t" + x + "," + y);

  this.key.hover(function() {
    this[0].attr({
      stroke: "#f00",
    });
    this[0].transform('s1 1');
  }, function() {
    this[0].attr({
      stroke: "#88aca0"
    });
    this[0].transform('t0.5 0.5');
  });
  this.key.mousedown(function() {
    this[0].attr({
      stroke: "#c00"
    });
    this[0].transform('t0.5 0.5');
  });
};

Key.prototype.transform = function(t) {
   this.key.transform(t);
}

var number_start = 454;
var keys = [
  {lower: "`", upper: "\"", row: 1, x_start: 10},
  {lower: "!", row: 1},
  {lower: "@", row: 1},
  {lower: "#", row: 1},
  {lower: "$", row: 1},
  {lower: "%", row: 1},
  {lower: "¨", row: 1},
  {lower: "&", row: 1},
  {lower: "*", row: 1},
  {lower: "(", row: 1},
  {lower: ")", row: 1},
  {lower: "_", upper: "-", row: 1},
  {lower: "=", upper: "+", row: 1},
  // Second row
  {lower: "q", upper: "Q", row: 2, x_start: 25},
  {lower: "w", upper: "W", row: 2},
  {lower: "r", upper: "R", row: 2},
  {lower: "e", upper: "E", row: 2},
  {lower: "t", upper: "T", row: 2},
  {lower: "y", upper: "Y", row: 2},
  {lower: "u", upper: "U", row: 2},
  {lower: "i", upper: "I", row: 2},
  {lower: "o", upper: "O", row: 2},
  {lower: "p", upper: "P", row: 2},
  {lower: "`", upper: "´", row: 2},
  {lower: "[", upper: "{", row: 2},
  {lower: "7", row: 2, x_start: number_start},
  {lower: "8", row: 2},
  {lower: "9", row: 2},
  // Third row
  {lower: "\\", row: 3, x_start: 15},
  {lower: "a", upper: "A", row: 3},
  {lower: "s", upper: "S", row: 3},
  {lower: "d", upper: "D", row: 3},
  {lower: "f", upper: "F", row: 3},
  {lower: "g", upper: "G", row: 3},
  {lower: "h", upper: "H", row: 3},
  {lower: "j", upper: "J", row: 3},
  {lower: "k", upper: "K", row: 3},
  {lower: "l", upper: "L", row: 3},
  {lower: "ç", upper: "Ç", row: 3},
  {lower: "~", upper: "^", row: 3},
  {lower: "]", upper: "}", row: 3},
  {lower: "4", row: 3, x_start: number_start},
  {lower: "5", row: 3},
  {lower: "6", row: 3},
  // Fourth row
  {lower: "z", upper: "Z", row: 4, x_start: 60},
  {lower: "x", upper: "X", row: 4},
  {lower: "c", upper: "C", row: 4},
  {lower: "v", upper: "V", row: 4},
  {lower: "b", upper: "B", row: 4},
  {lower: "n", upper: "N", row: 4},
  {lower: "m", upper: "M", row: 4},
  {lower: ",", upper: "<", row: 4},
  {lower: ".", upper: ">", row: 4},
  {lower: ";", upper: ":", row: 4},
  {lower: "/", upper: "?", row: 4},
  {lower: "1", row: 4, x_start: number_start},
  {lower: "2", row: 4},
  {lower: "3", row: 4}
];

var s = Snap(600, 200);

// Create standard buttons
var x_offset = 31;
var y_offset = 28;
var y_start = 10;
var x;

for(var letter in keys) {
  if (keys[letter].x_start) {
    x = keys[letter].x_start;
  }
  var y = y_start + (keys[letter].row * y_offset);
  new Key(s, keys[letter], x, y);
  x += x_offset;
}

// Draw non-standard keys
var enter = s.polygon(
  397, 66,
  442, 66,
  442, 117,
  418, 117,
  418, 89,
  397, 89);
enter.attr({
  fill: button_settings.fill,
  stroke: button_settings.stroke,
  strokeWidth: button_settings.strokeWidth,
  transform: button_settings.transform,
  cursor: button_settings.cursor
})



</script>
<p class="letter">test</p>
<p>
  <img src="keyboard.png">
</p>
</body>
</html>
