<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
  <meta http-equiv="content-type"
        content="application/xhtml+xml; charset=utf-8"/>
  <script src="snap.svg-min.js"></script>
  <style type="text/css">
  .letter {
    font-family: Verdana;
    font-weight: bolder;
  }
  </style>
</head>
<body>
  <svg id="keyboard" viewBox="0 0 600 200" width="600px" height="200px"></svg>
  <p class="letter">test</p>
  <p>
    <img src="keyboard.png">
  </p>
<script type="text/javascript">
var DeltaKeyboard = function(objectId) {
  this.margin = 5;
  this.button_settings = {
    'width': 26,
    'height': 23,
    'strokeWidth': 1,
    'transform': 't0.5 0.5',
  };

  this.s = Snap(objectId);
  this.drawSquareKeys();
  this.drawNonStandardKeys();
}

DeltaKeyboard.prototype.addKeyHandlers = function(obj) {
  var key_settings = {
    fill: "#F2F7F1",
    stroke: "#88aca0",
    cursor: "hand"
  };

  obj.attr(key_settings);
  obj[0].transform('t0.5 0.5');

  obj.hover(function() {
    this[0].attr({
      stroke: "#f00",
    });
    this[0].transform('s1 1');
  }, function() {
    this[0].attr({
      stroke: "#88aca0"
    });
    this[0].transform('t0.5 0.5');
  });
  obj.mousedown(function() {
    this[0].attr({
      stroke: "#c00"
    });
    this[0].transform('t0.5 0.5');
  });
};

DeltaKeyboard.prototype.createSquareKey = function(character, x, y, button_width) {

  var letter_settings = {
    'left_offset' : 13,
    'top_offset' : 26,
    'cursor': 'hand',
    'class':'letter',
    'fill': '#006600',
    'strokeWidth': "0"
  };

  var _button;
  var _letter;
  var _key;

  _button = this.s.rect();
  _button.attr(this.button_settings);

  _letter = this.s.text(0, 0, character.lower);
  _letter.attr(letter_settings);

  // Reposition text in button
  var left = ((_button.node.clientWidth - _letter.node.clientWidth) / 2) + letter_settings.left_offset;
  var top = ((_button.node.clientHeight - _letter.node.clientHeight) / 2) + letter_settings.top_offset;
  _letter.transform("t" + left + "," + top);

  // Position the key
  _key = this.s.g(_button, _letter);
  _key.transform("t" + x + "," + y);

  this.addKeyHandlers(_key);
};

DeltaKeyboard.prototype.drawSquareKeys = function() {
  var y_offset = this.button_settings.height + this.margin;
  var y_start = 10;
  var num_x_offset = 454;
  this.square_keys = [
    {lower: "`", upper: "\"", row: 1, x_start: 4},
    {lower: "!", row: 1},
    {lower: "@", row: 1},
    {lower: "#", row: 1},
    {lower: "$", row: 1},
    {lower: "%", row: 1},
    {lower: "¨", row: 1},
    {lower: "&", row: 1},
    {lower: "*", row: 1},
    {lower: "(", row: 1},
    {lower: ")", row: 1},
    {lower: "_", upper: "-", row: 1},
    {lower: "=", upper: "+", row: 1},
    // Second row
    {lower: "q", upper: "Q", row: 2, x_start: 25},
    {lower: "w", upper: "W", row: 2},
    {lower: "r", upper: "R", row: 2},
    {lower: "e", upper: "E", row: 2},
    {lower: "t", upper: "T", row: 2},
    {lower: "y", upper: "Y", row: 2},
    {lower: "u", upper: "U", row: 2},
    {lower: "i", upper: "I", row: 2},
    {lower: "o", upper: "O", row: 2},
    {lower: "p", upper: "P", row: 2},
    {lower: "`", upper: "´", row: 2},
    {lower: "[", upper: "{", row: 2},
    {lower: "7", row: 2, x_start: num_x_offset},
    {lower: "8", row: 2},
    {lower: "9", row: 2},
    // Third row
    {lower: "\\", row: 3, x_start: 15},
    {lower: "a", upper: "A", row: 3},
    {lower: "s", upper: "S", row: 3},
    {lower: "d", upper: "D", row: 3},
    {lower: "f", upper: "F", row: 3},
    {lower: "g", upper: "G", row: 3},
    {lower: "h", upper: "H", row: 3},
    {lower: "j", upper: "J", row: 3},
    {lower: "k", upper: "K", row: 3},
    {lower: "l", upper: "L", row: 3},
    {lower: "ç", upper: "Ç", row: 3},
    {lower: "~", upper: "^", row: 3},
    {lower: "]", upper: "}", row: 3},
    {lower: "4", row: 3, x_start: num_x_offset},
    {lower: "5", row: 3},
    {lower: "6", row: 3},
    // Fourth row
    {lower: "z", upper: "Z", row: 4, x_start: 63},
    {lower: "x", upper: "X", row: 4},
    {lower: "c", upper: "C", row: 4},
    {lower: "v", upper: "V", row: 4},
    {lower: "b", upper: "B", row: 4},
    {lower: "n", upper: "N", row: 4},
    {lower: "m", upper: "M", row: 4},
    {lower: ",", upper: "<", row: 4},
    {lower: ".", upper: ">", row: 4},
    {lower: ";", upper: ":", row: 4},
    {lower: "/", upper: "?", row: 4},
    {lower: "1", row: 4, x_start: num_x_offset},
    {lower: "2", row: 4},
    {lower: "3", row: 4}
  ];

  var x;
  for(var letter in this.square_keys) {
    if (this.square_keys[letter].x_start) {
      x = this.square_keys[letter].x_start;
    }
    var y = y_start + (this.square_keys[letter].row * y_offset);
    this.createSquareKey(this.square_keys[letter], x, y);
    x += this.button_settings.width + this.margin;
  }
};

DeltaKeyboard.prototype.drawNonStandardKeys = function() {
  // Draw non-standard keys
  var enter = this.s.polygon(
    397, 66,
    442, 66,
    442, 117,
    418, 117,
    418, 89,
    397, 89);
  enter.transform('t0.5 0.5');
  enter.attr({ 'fill': '#FECB00' });
  this.addKeyHandlers(this.s.g(enter));

  var leftShift = this.s.polygon(
      15, 122,
      58, 122,
      58, 145,
      15, 145
  );
  this.addKeyHandlers(this.s.g(leftShift));

  var capsLock = this.s.polygon(
    404, 122,
    442, 122,
    442, 145,
    404, 145
  );
  this.addKeyHandlers(this.s.g(capsLock));

  var backspace = this.s.polygon(

  );
  this.addKeyHandlers(this.s.g(backspace));

  var space = this.s.polygon(

  );
  this.addKeyHandlers(this.s.g(space));

  var rightShift = this.s.polygon(

  );
  this.addKeyHandlers(this.s.g(rightShift));

  var help = this.s.polygon(

  );
  this.addKeyHandlers(this.s.g(help));

  var numZero = this.s.polygon(

  );
  this.addKeyHandlers(this.s.g(numZero));

  var numOk = this.s.polygon(

  );
  this.addKeyHandlers(this.s.g(numOk));

};

var keyboard = new DeltaKeyboard("#keyboard");

</script>

</body>
</html>
